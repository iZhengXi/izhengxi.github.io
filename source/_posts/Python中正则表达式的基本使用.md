---
title: Python中正则表达式的基本使用
tags:
  - Python
  - 正则表达式
categories:
  - 编程笔记
  - Python
abbrlink: d090396c
date: 2022-01-25 17:22:09
---

**字符串**是编程时涉及到的最多的一种**数据结构**，对字符串进行操作的需求几乎无处不在。比如判断一个字符串是否是合法的Email地址，虽然可以编程提取@前后的子串，再分别判断是否是单词和域名，但这样做不但麻烦，而且代码难以复用。<br />

<!-- more -->

正则表达式是一种用来匹配字符串的强有力的武器。它的设计思想是用一种描述性的语言来给字符串定义一个规则，凡是符合规则的字符串，我们就认为它**“匹配”**了，否则，该字符串就是不合法的。<br />所以我们判断一个字符串是否是合法的Email的方法是：<br />**创建一个匹配Email的正则表达式；**

1. 用该正则表达式去匹配用户的输入来判断是否合法。
1. 因为正则表达式也是用字符串表示的，所以，我们要首先了解如何用字符来描述字符。

正则表达式的大致匹配过程是：依次拿出表达式和文本中的字符比较，如果每一个字符都能匹配，则匹配成功；一旦有匹配不成功的字符则匹配失败。
> 官方文档：
> 中文：[https://docs.python.org/zh-cn/3/library/re.html](https://docs.python.org/zh-cn/3/library/re.html)
> 英文：[https://docs.python.org/3/library/re.html](https://docs.python.org/3/library/re.html)

使用之前，需要引入正则模块(Regular Expression)：<br />`import re #引入正则表达式`<br />主要使用的方法 match(), 从左到右进行匹配：
```python
#pattern 为要校验的规则
#str 为要进行校验的字符串
result = re.match(pattern, str) 
#如果result不为None,则group方法则对result进行数据提取
result.group()
```
匹配规则：<br />1️⃣单字符匹配规则：
```python
字符    功能
.       匹配任意1个字符(除了\n)
[]      匹配[]中列举的字符
\d      匹配数字,也就是0-9
\D      匹配非数字,也就是匹配不是数字的字符
\s      匹配空白符,也就是 空格\tab
\S      匹配非空白符,\s取反
\w      陪陪单词字符, a-z, A-Z, 0-9, _
\W      匹配非单词字符, \w取反
```
2️⃣表示数量的规则：
```python
字符    功能
*       匹配前一个字符出现0次多次或者无限次,可有可无,可多可少
+       匹配前一个字符出现1次多次或则无限次,直到出现一次
?       匹配前一个字符出现1次或者0次,要么有1次,要么没有
{m}     匹配前一个字符出现m次
{m,}    匹配前一个字符至少出现m次
{m,n}   匹配前一个字符出现m到n次
```
下表列出了正则表达式模式语法中的特殊元素。如果你使用模式的同时提供了可选的标志参数，某些模式元素的含义会改变。
```python
模式    描述
^    匹配字符串的开头
$    匹配字符串的末尾。
.    匹配任意字符，除了换行符，当re.DOTALL标记被指定时，则可以匹配包括换行符的任意字符。
[...]    用来表示一组字符,单独列出：[amk] 匹配 'a'，'m'或'k'
[^...]    不在[]中的字符：[^abc] 匹配除了a,b,c之外的字符。
re*    匹配0个或多个的表达式。
re+    匹配1个或多个的表达式。
re?    匹配0个或1个由前面的正则表达式定义的片段，非贪婪方式
re{ n}     
re{ n,}    精确匹配n个前面表达式。
re{ n, m}    匹配 n 到 m 次由前面的正则表达式定义的片段，贪婪方式
a| b    匹配a或b
(re)    G匹配括号内的表达式，也表示一个组
(?imx)    正则表达式包含三种可选标志：i, m, 或 x 。只影响括号中的区域。
(?-imx)    正则表达式关闭 i, m, 或 x 可选标志。只影响括号中的区域。
(?: re)    类似 (...), 但是不表示一个组
(?imx: re)    在括号中使用i, m, 或 x 可选标志
(?-imx: re)    在括号中不使用i, m, 或 x 可选标志
(?#...)    注释.
(?= re)    前向肯定界定符。如果所含正则表达式，以 ... 表示，在当前位置成功匹配时成功，否则失败。但一旦所含表达式已经尝试，匹配引擎根本没有提高；模式的剩余部分还要尝试界定符的右边。
(?! re)    前向否定界定符。与肯定界定符相反；当所含表达式不能在字符串当前位置匹配时成功
(?> re)    匹配的独立模式，省去回溯。
\w    匹配字母数字
\W    匹配非字母数字
\s    匹配任意空白字符，等价于 [\t\n\r\f].
\S    匹配任意非空字符
\d    匹配任意数字，等价于 [0-9].
\D    匹配任意非数字
\A    匹配字符串开始
\Z    匹配字符串结束，如果是存在换行，只匹配到换行前的结束字符串。c
\z    匹配字符串结束
\G    匹配最后匹配完成的位置。
\b    匹配一个单词边界，也就是指单词和空格间的位置。例如， 'er\b' 可以匹配"never" 中的 'er'，但不能匹配 "verb" 中的 'er'。
\B    匹配非单词边界。'er\B' 能匹配 "verb" 中的 'er'，但不能匹配 "never" 中的 'er'。
\n, \t, 等.    匹配一个换行符。匹配一个制表符。等
\1...\9    匹配第n个分组的子表达式。
\10    匹配第n个分组的子表达式，如果它经匹配。否则指的是八进制字符码的表达式。
```
<a name="toc-heading-1"></a>
### re库中常用方法
![image.png](https://vip2.loli.io/2022/01/25/83mX7AGTEdpNVry.png)
<a name="toc-heading-2"></a>

### 修饰符总结
![image.png](https://vip2.loli.io/2022/01/25/oik8KEGm6nbaVfC.png)
<a name="toc-heading-3"></a>

### 常用正则表达式
```python
1、匹配email地址:
[\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?
2、匹配网址URL：
[a-zA-z]+://[^\s]*
3、匹配18位身份证号：
^(\d{6})(\d{4})(\d{2})(\d{2})(\d{3})([0-9]|X)$
4、匹配年月日格式：
([0-9]{3}[1-9]|[0-9]{2}[1-9][0-9]{1}|[0-9]{1}[1-9][0-9]{2}|[1-9][0-9]{3})-(((0[13578]|1[02])-(0[1-9]|[12][0-9]|3[01]))|((0[469]|11)-(0[1-9]|[12][0-9]|30))|(02-(0[1-9]|[1][0-9]|2[0-8])))
5、匹配整数：
^-?[1-9]\d*$
6、匹配正整数：
^[1-9]\d*$
7、匹配负整数：
^-[1-9]\d*$
8、匹配空白行：
\n\s*\r
```
> 参考文献：

1. [https://www.jianshu.com/p/7fa6fe0b39af](https://www.jianshu.com/p/7fa6fe0b39af)
1. [https://www.jianshu.com/p/773c32dcd254](https://www.jianshu.com/p/773c32dcd254)
1. [https://blog.csdn.net/weixin_40136018/article/details/81183504](https://blog.csdn.net/weixin_40136018/article/details/81183504)
1. [https://blog.csdn.net/weixin_40907382/article/details/79654372](https://blog.csdn.net/weixin_40907382/article/details/79654372)



